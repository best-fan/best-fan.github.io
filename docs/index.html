<!DOCTYPE html>
<html lang="zh-cn">
  <head>
    <meta charset="UTF-8" />
    <title>Learn To Better</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="description" content="Description" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, minimum-scale=1.0"
    />
    <!-- <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/docsify@4/lib/themes/vue.css"> -->
    <!-- 更新 引用资源url -->
    <link
      rel="stylesheet"
      href="//blog.bravetimes.cn/project/blogUnit/theme-vue.css"
    />
  </head>

  <body>
    <div id="app">念念不忘，必有回响</div>
    <script>
      window.$docsify = {
        name: "Learn To Better",
        loadSidebar: true,
        coverpage: false, //是否启用封面
        // 自定义文件名
        // coverpage: 'cover.html',
        // onlyCover: false,//是否只显示封面
        alias: {
          "/.*/_sidebar.md": "/_sidebar.md",
        },
        subMaxLevel: 4,
        search: {
          // 支持本地化
          placeholder: {
            "/zh-cn/": "搜索",
            "/": "有问题 搜一下",
          },
        },
        formatUpdated: "{MM}/{DD} {HH}:{mm}",
        repo: "https://github.com//best-fan/best-fan.github.io/",
        count: {
          countable: true,
          fontsize: "0.9em",
          color: "rgb(90,90,90)",
          language: "chinese",
        },
      };
    </script>
    <!-- Docsify v4 -->
    <script src="//cdn.jsdelivr.net/npm/docsify@4"></script>
    <!-- 全文搜索 -->
    <script src="//cdn.jsdelivr.net/npm/docsify/lib/plugins/search.min.js"></script>
    <!-- 图片缩放 -->
    <script src="//cdn.jsdelivr.net/npm/docsify/lib/plugins/zoom-image.min.js"></script>
    <!-- 字数统计 -->
    <script src="//unpkg.com/docsify-count/dist/countable.js"></script>
    <!-- 复制到剪贴板 -->
    <!-- <script src="//cdn.jsdelivr.net/npm/docsify-copy-code"></script> -->
    <script src="//blog.bravetimes.cn/project/blogUnit/docsify-copy-code.js"></script>
    <!-- 代码高亮 -->
    <script src="//cdn.jsdelivr.net/npm/prismjs@1/components/prism-bash.min.js"></script>
  </body>
  <style>
    /* 自定义样式 */

    .docsify-copy-code-button .success {
      color: #2dbf08;
      background: rgb(16 22 26 / 10%);
    }

    kbd {
      background-color: #f8f8f8;
      color: var(--theme-color, #42b983);
    }

    :root {
      --theme-color: #1e9260;
    }

    input {
      background: rgba(255, 255, 255, 0.4);
    }

    .sidebar-toggle {
      background-color: rgba(255, 255, 255, 0.1);
    }

    .markdown-section tr:nth-child(2n) {
      background: transparent;
    }

    p {
      /* 禁止选择 */
      user-select: none;
    }

    body {
      background: url(https://blog.bravetimes.cn/api/public/uploads/2021/10/18/bg.jpg)
        0% 0% / cover no-repeat fixed;
    }

    #main {
      background: rgba(255, 255, 255, 0.7);
    }

    .markdown-section {
      max-width: 90%;
    }

    .sidebar {
      background: rgba(255, 255, 255, 0.8);
    }

    .markdown-section pre {
      border: 2px solid #0000002e;
    }

    .markdown-section code,
    .markdown-section pre {
      background: #f8f8f84d;
    }

    .app-name-link {
      /* font-size: 14px; */
      margin-top: 0;
      text-align: center;
      -webkit-background-size: 200% 100%;
      background-image: linear-gradient(
        90deg,
        #fa8bff 0%,
        #2bd2ff 52%,
        #fd34fd 90%
      );
      font-weight: 700;
      -webkit-text-fill-color: transparent;
      -webkit-background-clip: text;
      animation: masked-animation-data-v-5faaa043 8.5s ease-in-out infinite;
    }

    .one-tips {
      margin-top: 0;
      text-align: left;
      -webkit-background-size: 200% 100%;
      background-image: linear-gradient(90deg, #4995fbb3 90%, #fd34fd 10%);
      font-weight: 700;
      -webkit-text-fill-color: transparent;
      -webkit-background-clip: text;
      animation: masked-animation-data-v-5faaa043 15s ease-in-out infinite;
    }

    @keyframes masked-animation-data-v-5faaa043 {
      0% {
        background-position: 0 0;
      }
      to {
        background-position: -100% 0;
      }
    }

    .zh-tips {
      font-size: 16px;
    }
    .markdown-section td,
    .markdown-section th {
      background: #fffbedba;
    }
  </style>
  <script>
    var timer;
    window.addEventListener("DOMContentLoaded", function () {
      var iconList = [
        "❤",
        "🌈",
        "😂",
        "🐷",
        "👍",
        "😍",
        "😄",
        "😘",
        "😎",
        "🤗",
        "😚",
        "🤑",
        "🤡",
        "🧐",
        "😻",
        "🐱‍🚀",
        "🐵",
        "🐶",
        "🎅",
        "👼",
        "🎈",
        "✨",
        "🎉",
        "🎄",
        "🎉",
        "🎁",
        "🎨",
        "🎵",
        "🥇",
        "🍔",
        "🍟",
        "🌭",
        "🍿",
        "🍬",
        "🍄",
        "🍓",
        "🏵",
        "🌺",
        "🌼",
        "🍁",
        "⭐",
        "🔥",
        "🌍",
        "🛸",
        "🌏",
        "🏝",
        "🌞",
        "🌟",
      ];
      var textList = new Array(
        "富强",
        "民主",
        "文明",
        "和谐",
        "自由",
        "平等",
        "公正",
        "法治",
        "爱国",
        "敬业",
        "诚信",
        "友善"
      );
      document
        .getElementsByTagName("body")[0]
        .addEventListener("click", function (e) {
          doms = document.getElementsByClassName("addAnimatedText");
          if (doms.length > 0) {
            doms[0].remove();
          }
          var spanDom = document.createElement("span");
          spanDom.className = "addAnimatedText";
          const iconIndex = Math.ceil(Math.random() * iconList.length - 1);
          const textIndex = Math.ceil(Math.random() * textList.length - 1);
          spanDom.appendChild(
            document.createTextNode(
              `${iconList[iconIndex]}${textList[textIndex]}${iconList[iconIndex]}`
            )
          );
          spanDom.style.zIndex = "999999";
          spanDom.style.position = "fixed";
          spanDom.style.left = e.clientX + "px";
          spanDom.style.top = e.clientY - 5 + "px";
          spanDom.style.color =
            "rgb(" +
            ~~(255 * Math.random()) +
            "," +
            ~~(255 * Math.random()) +
            "," +
            ~~(255 * Math.random()) +
            ")";
          document.getElementsByTagName("body")[0].appendChild(spanDom);
          clearInterval(timer);
          setStyle(spanDom, 1500);
          // 需求
          // 总共 2500s   执行一次 10ms    共计多少次 2500/10
          // 花费次数 time=  2500/10;
          function setStyle(spanDom, compliteTime = 2500) {
            let top = e.clientY; //原始Y坐标位置
            let opacity = 1;
            moveTop = 180; //Y坐标移动距离
            let timmerTime = 5; //每10ms执行一次
            let time = 0; //总计花费时间
            timer = setInterval(function () {
              time++;
              spanDom.style.top =
                top - (moveTop / (compliteTime / timmerTime)) * time + "px";
              spanDom.style.opacity =
                1 - (1 / (compliteTime / timmerTime)) * time;
              if (time >= compliteTime / timmerTime) {
                clearInterval(timer);
                document.getElementsByClassName("addAnimatedText")[0].remove();
                return;
              }
            }, timmerTime);
          }
        });
    });
  </script>
  <script src="https://cdn.bootcdn.net/ajax/libs/axios/0.21.1/axios.min.js"></script>
  <script>
    /**
     * 获取一个 内容
     * */
    var isSetting = false;

    function getOneData(defultUrl = "get-one-data") {
      if (isSetting) {
        return;
      }
      isSetting = true;
      axios
        .get("https://api.bravetimes.cn/tool-api/" + defultUrl)
        .then((res) => {
          const resData = res.data.resData;
          if (resData.list) {
            const oneList = resData.list;
            setDomText(oneList, defultUrl);
          }
        });
    }

    function setDomText(dataList, askUrl) {
      const index = Math.floor(Math.random() * dataList.length);
      const doms = document.getElementsByClassName("markdown-section")[0];
      let pDoms = document.createElement("p");
      let nomerTime = 2000;
      switch (askUrl) {
        case "get-one-data":
          pDoms.textContent = `${dataList[index].id}: ${dataList[index].text}----${dataList[index].time}`;
          pDoms.className = "one-tips";
          pDoms.title = "💥这是个彩蛋🥚！💥";
          break;
        case "get-zh-data":
          pDoms = document.getElementsByClassName("zh-data")[0];
          let text = dataList[index].text
            .replaceAll(/;|；|,|，|。|\./g, "<br>")
            .replaceAll(/-|——/g, "<br> source:");
          pDoms.innerHTML = text;
          pDoms.title = "💥换一个💥";
          nomerTime = 1000;
          break;
      }
      pDoms.setAttribute("style", "color:#d68080;cursor: pointer;");
      doms.append(pDoms);
      isSetting = false;
      pDoms.addEventListener("click", function (e) {
        if (askUrl == "get-zh-data") {
          pDoms.innerHTML = "";
        } else {
          pDoms.remove();
        }

        setTimeout(() => {
          getOneData(askUrl);
        }, nomerTime);
      });
      console.log("设置成功");
    }

    function getWebRouter() {
      return window.location.href;
    }
    if ("onload" in window) {
      window.onload = isSetText;
    }
    if (
      "onhashchange" in window &&
      (typeof document.documentMode === "undefined" ||
        document.documentMode == 8)
    ) {
      // 浏览器支持onhashchange事件
      window.onhashchange = isSetText; // TODO，对应新的hash执行的操作函数
    } else {
      console.log("不支持");
    }

    function isSetText() {
      let currentUrl = getWebRouter();
      if (currentUrl.indexOf("?")) {
        currentUrl = currentUrl.split("?")[0];
      }
      if (currentUrl.endsWith("/")) {
        //首页设置一言
        getOneData();
        // console.log('设置首页')
      }
      if (currentUrl.endsWith("/daily")) {
        getOneData("get-zh-data");
        addNewYearDom();
        // console.log('设置知乎')
      }
    }

    var timmer = "";

    function addNewYearDom() {
      const nextYear = new Date().getFullYear() + 1;
      clearInterval(timmer);
      timmer = setInterval(() => {
        let doms = document.getElementsByClassName("end-new-year")[0];
        if (doms) {
          doms.innerHTML = restTime(`${nextYear}/01/01 00:00:00`, "元旦");
        }
      }, 1000);
    }

    function restTime(str, name) {
      const EndTime = new Date(str);
      const NowTime = new Date();
      const t = EndTime.getTime() - NowTime.getTime();
      const d = PrefixZero(Math.floor(t / 1000 / 60 / 60 / 24), 2);
      const h = PrefixZero(Math.floor((t / 1000 / 60 / 60) % 24), 2);
      const m = PrefixZero(Math.floor((t / 1000 / 60) % 60), 2);
      const s = PrefixZero(Math.floor((t / 1000) % 60), 2);
      return `距离 ${
        str.split("/")[0]
      }年 ${name}: ${d} 天 ${h} 小时 ${m} 分钟 ${s} 秒`;
    }

    function PrefixZero(num, n) {
      return (Array(n).join(0) + num).slice(-n);
    }
  </script>
</html>
