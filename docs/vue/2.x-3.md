# vue2.x源码学习(三)

源码构建:Vue.js 源码是基于 [Rollup](https://github.com/rollup/rollup) 构建的，它的构建相关配置都在 scripts 目录下。

## 构建版本

通常一个基于NPM托管的项目都由一个package.json文件，它的你内容实际上是一个标准的json对象。

通过配置script字段作为NPM的执行脚本，Vue.js源码构建脚本：
```js
    {
    "script": {
        "build": "node scripts/build.js",
        "build:ssr": "npm run build -- web-runtime-cjs,web-server-renderer",
        "build:weex": "npm run build -- weex"
        }
    }
```
共3条命令 都是构建Vue.js,后2条是在第一条命令基础上加上了一写环境参数。运行命令<kbd >npm run build</kbd>  实际执行<kbd  >node scripts/build.js</kdb>

## 构建过程
分析构建入口JS文件,在 <kbd>scripts/build.js</kbd>
```js
let builds = require('./config').getAllBuilds()

// filter builds via command line arg
if (process.argv[2]) {
  const filters = process.argv[2].split(',')
  builds = builds.filter(b => {
    return filters.some(f => b.output.file.indexOf(f) > -1 || b._name.indexOf(f) > -1)
  })
} else {
  // filter out weex builds by default
  builds = builds.filter(b => {
    return b.output.file.indexOf('weex') === -1
  })
}

build(builds)
```


